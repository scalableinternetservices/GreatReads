<p id="notice"><%= notice %></p>

<p>
	<strong>Title:</strong>
	<%= @book.title %>
</p>

<%= image_tag @book.avatar.url %>

<p id="story">
	<%= @book.story %>
</p>


<div class="ui button" id="popup">Show flowing popup</div>
<div class="ui flowing popup top left transition hidden">
	<div class="ui three column divided center aligned grid">
		<div class="column">
			<h4 class="ui header">Basic Plan</h4>
			<p><b>2</b> projects, $10 a month</p>
			<div class="ui button">Choose</div>
		</div>
		<div class="column">
			<h4 class="ui header">Business Plan</h4>
			<p><b>5</b> projects, $20 a month</p>
			<div class="ui button">Choose</div>
		</div>
		<div class="column">
			<h4 class="ui header">Premium Plan</h4>
			<p><b>8</b> projects, $25 a month</p>
			<div class="ui button">Choose</div>
		</div>
	</div>
</div>


<p>
<strong>Your shelves:</strong><br>
<% @shelves.each do |shelf| %>
  <%= shelf.shelf_name %>
   
  <%= link_to "Add  to shelf", on_shelves_path(:book_id => @book.id, :shelf_id => shelf.id), :method => :post %>
  <br>
<% end %>
<%= will_paginate @shelves %>
</p>

<p>
<strong>Comments:</strong>
<br>
<% @comments.each do |comment| %>
    Comment: <%= comment.body %>
    <br>
<%end%>
<br>
<%= will_paginate @comments %>
</p>

<strong>Add a comment</strong>
<br>
<%= form_for(@new_comment) do |f| %>
<div class="field">
	<%= f.hidden_field :book_id, :value => @new_comment.book_id %>
	<%= f.hidden_field :author_id, :value => current_user.id %>
	<%= f.text_field :body %>
</div>
<div class="actions">
	<%= f.submit %>
</div>
<% end %>
<br>
<br>

<%= link_to 'Edit', edit_book_path(@book) %> |
<%= link_to 'Back', books_path %>

<script>
	if(!window.Kolich){
		Kolich = {};
	}

	Kolich.Selector = {};
	Kolich.Selector.getSelected = function(){
		var t = '';
		if(window.getSelection){
			t = window.getSelection();
		}else if(document.getSelection){
			t = document.getSelection();
		}else if(document.selection){
			t = document.selection.createRange().text;
		}
		return t;
	}

	Kolich.Selector.mouseup = function(){
		var st = Kolich.Selector.getSelected();
		// $('#story')
		//   .popup({
		//     popup : $('.popup'),
		//     hoverable: true
		//   })
		// ;
		if(st!=''){
			alert("You selected:\n"+st);
		}
	}

	$(document).ready(function(){
		$(document).bind("mouseup", Kolich.Selector.mouseup);
	});
</script>
